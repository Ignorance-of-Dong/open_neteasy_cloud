(window.webpackJsonpopen_neteasy_cloud=window.webpackJsonpopen_neteasy_cloud||[]).push([[11],{238:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);n(175);var a=n(262),c=n(50),r=(n(216),n(263)),o=n(0),l=n.n(o),i=(n(238),n(46));var s=function(e){var t,n,a,c="00:00";return e>0&&((t=Math.floor(e/3600))<10&&(t="0"+t),(n=Math.floor((e-3600*t)/60))<10&&(n="0"+n),(a=Math.floor((e-3600*t-60*n)%60))<10&&(a="0"+a),c=n+":"+a),c},u=n(60),m=n(51);function d(e){return l.a.createElement(l.a.Fragment,null,s(e.currenttime)?s(e.currenttime):"00:00")}function p(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{handleStyle:{width:6,height:6,marginLeft:-3,marginTop:-2,border:0},defaultValue:0,value:"00:00"!==e.currenttime?e.currenttime:0,min:0,max:"00:00"!==e.musicTime?e.musicTime:0,onChange:function(t){e.dropSpeed(t)}}))}function f(e){var t=Object(o.useState)(0),n=Object(c.a)(t,2),r=n[0],s=n[1],m=Object(o.useState)([]),d=Object(c.a)(m,2),p=d[0],f=d[1],E=Object(o.useState)(""),v=Object(c.a)(E,2),g=v[0],b=v[1],h=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=Object(u.a)().id,t=JSON.parse(sessionStorage.getItem("songListDetails"));f(t),t.forEach(function(t,n){1*t.id===1*e&&(s(n),setTimeout(function(){sessionStorage.setItem("currScrollTop",(50*(n-1)).toString()),h.current.scrollTop=50*(n-1)},50))})},[g]),e.setChildModuleScroll(function(e){h.current&&setTimeout(function(){h.current.scrollTop=e;var t=Object(u.a)().id;b(t)},50)}),Object(o.useEffect)(function(){!function(){var e=JSON.parse(sessionStorage.getItem("songListDetails")),t=Object(u.a)().id;e.forEach(function(e,n){1*e.id===1*t&&(sessionStorage.setItem("currScrollTop",(50*(n-1)).toString()),h.current.scrollTop=50*(n-1))})}()},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(a.a,{popup:!0,visible:e.showModule,onClose:function(){e.setshowModule(!1)},animationType:"slide-up"},l.a.createElement("div",{className:"eject-module-wrap"},l.a.createElement("div",{className:"eject-module-wrap-title"},l.a.createElement("div",{className:"eject-module-wrap-title-left"},l.a.createElement(i.b,{className:"player-list-icon",un:"\ue7fe"}),l.a.createElement("span",{className:"list-t"},"\u64ad\u653e\u5217\u8868"),l.a.createElement("span",{className:"list-len"},"(523)"))),l.a.createElement("div",{className:"eject-module-wrap-content-list",ref:h},p.map(function(t,n){return l.a.createElement("div",{className:"eject-module-wrap-content-tip",key:n},l.a.createElement("div",{className:"eject-module-wrap-content-name",style:{color:r===n?"red":""},onClick:function(){!function(t,n){sessionStorage.setItem("currScrollTop",(50*(t-1)).toString()),s(t),e.props.history.replace("/musicplayer?id=".concat(n)),e.getsongurl(n),h.current.scrollTop=50*(t-1)}(n,t.id)}},r===n?l.a.createElement(i.b,{className:"eject-module-icon",un:"\ue659"}):null,l.a.createElement("div",{className:"eject-module-wrap-music-name"},t.name),l.a.createElement("span",{style:{color:r===n?"red":""}},"\xa0-\xa0"),l.a.createElement("div",{className:"eject-module-wrap-music-author",style:{color:r===n?"red":""}},t.ar[0].name)))})))))}t.default=function(e){var t,n=Object(o.useState)(!1),a=Object(c.a)(n,2),r=a[0],E=a[1],v=Object(o.useState)("00:00"),g=Object(c.a)(v,2),b=g[0],h=g[1],j=Object(o.useState)("00:00"),N=Object(c.a)(j,2),w=N[0],O=N[1],S=Object(o.useState)(!0),y=Object(c.a)(S,2),k=y[0],C=y[1],T=Object(o.useState)(""),I=Object(c.a)(T,2),L=I[0],M=I[1],F=Object(o.useState)(null),x=Object(c.a)(F,2),J=x[0],P=x[1],z=Object(o.useRef)(null);function D(e){var t={id:e};JSON.parse(sessionStorage.getItem("songListDetails")).forEach(function(t){1*t.id===1*e&&P(t)}),Object(m.i)(t).then(function(e){M(e.data[0].url)}).catch(function(e){console.log(e,"res"),Object(i.c)("\u7f51\u7edc\u8bf7\u6c42\u5f02\u5e38\uff0c\u8bf7\u4e24\u5206\u949f\u540e\u518d\u8bd5",2e3)})}function R(n){for(var a=Object(u.a)().id,c=JSON.parse(sessionStorage.getItem("songListDetails")),r=0,o=0;o<c.length-1;o++)if(1*c[o].id===1*a){if((r=n===t[1]?o-1:o+1)<0)return void(r=0);if(r>c.length)return void(r=c.length);z.current.pause(),E(!1),D(c[r].id),e.history.replace("/musicplayer?id=".concat(c[r].id))}}return Object(o.useEffect)(function(){r?z.current.play().then(function(e){h(z.current.duration),z.current.play(),z.current.addEventListener("timeupdate",function(){O(z.current.currentTime)},!1),z.current.addEventListener("ended",function(){E(!1),O("00:00")},!1)}).catch(function(e){console.log(e,"err"),z.current.pause(),E(!1),Object(i.c)("\u52a0\u8f7d\u6b4c\u66f2\u5931\u8d25,\u8bf7\u91cd\u8bd5\uff01",2e3)}):z.current.pause()},[r]),Object(o.useEffect)(function(){D(Object(u.a)().id)},[]),function(e){e[e.add=0]="add",e[e.last=1]="last"}(t||(t={})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"audios"},l.a.createElement("audio",{src:L,controls:!0,preload:"auto",ref:z})),l.a.createElement("div",{className:"music-player-wraps-mask",style:{background:"url(".concat(J?J.al.picUrl:"http://p2.music.126.net/SHElx36maw8L6CIXfiNbFw==/109951164144982394.jpg",")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"10%"}}),l.a.createElement("div",{className:"music-player-wraps"},l.a.createElement(i.a,{props:e},J?J.name:"\u52a0\u8f7d\u4e2d\u3002\u3002\u3002"),l.a.createElement("div",{className:"music-player-content-logo"},l.a.createElement("div",{className:"rotate-music-logo-wraps",style:{animationPlayState:r?"running":"paused"}},l.a.createElement("div",{className:"rotate-music-logo"},l.a.createElement("img",{src:J?J.al.picUrl:"http://p2.music.126.net/SHElx36maw8L6CIXfiNbFw==/109951164144982394.jpg",alt:""})))),l.a.createElement("div",{className:"music-player-conster-ok"},l.a.createElement("div",{className:"music-player-conster-top"},l.a.createElement("span",null,l.a.createElement(i.b,{className:"like-icon",un:"\ue610"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"download-icon",un:"\ue667"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"sound-icon",un:"\ue639"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"comm-icon",un:"\ue79a"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"more-icon",un:"\ue612"}))),l.a.createElement("div",{className:"music-player-conster-center"},l.a.createElement("div",{className:"m-p-c-c-l"},l.a.createElement(d,{currenttime:w})),l.a.createElement("div",{className:"m-p-c-c-c"},l.a.createElement(p,{currenttime:w,musicTime:b,dropSpeed:function(e){z.current.pause(),O(e||0)}})),l.a.createElement("div",{className:"m-p-c-c-r"},b?s(b):"00:00")),l.a.createElement("div",{className:"music-player-conster-bottom"},l.a.createElement("span",null,l.a.createElement(i.b,{className:"loop-icon",un:"\ue620"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"upper-icon",un:"\ue61e",onClick:function(){R(t[1])}})),l.a.createElement("span",{onClick:function(){E(!r)}},r?l.a.createElement(i.b,{className:"player-icon",un:"\ue60f"}):l.a.createElement(i.b,{className:"player-icon",un:"\ue628"})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"lower-icon",un:"\ue7a9",onClick:function(){R(t[0])}})),l.a.createElement("span",null,l.a.createElement(i.b,{className:"list-icon",un:"\ue61a",onClick:function(){C(!0)}}),l.a.createElement(f,{showModule:k,setshowModule:C,getsongurl:D,setChildModuleScroll:function(e){e(sessionStorage.getItem("currScrollTop"))},props:e}))))))}},33:function(e,t,n){"use strict";var a=n(0),c=n.n(a);n(47);t.a=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"header-bar ".concat(e.className)},c.a.createElement("div",{className:"back-header"},c.a.createElement("svg",{className:"header-icon",width:15,height:22,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:function(){e.props.history.go(-1)}},c.a.createElement("path",{fill:"#000",d:"M317.288601 514.022357L774.12597 54.614875a32.126397 32.126397 0 0 0-45.619484-44.976956L249.180639 488.963767a32.126397 32.126397 0 0 0 0 45.619484l479.968375 479.968376a32.126397 32.126397 0 0 0 45.619484-45.619485z"}))),c.a.createElement("div",{className:"text-header"},e.children||"\u624b\u673a\u53f7\u767b\u9646")))}},46:function(e,t,n){"use strict";var a=n(33),c=n(0),r=n.n(c),o=n(11),l=n.n(o);n(48);function i(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"over-toast"},e.value))}var s=function(e,t){var n=document.createElement("div");document.body.appendChild(n),l.a.render(r.a.createElement(i,{value:e}),n),setTimeout(function(){document.body.removeChild(n)},t)};var u=function(e){return r.a.createElement("i",{className:"iconfont ".concat(e.className),onClick:e.onClick},e.un)};n.d(t,"a",function(){return a.a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u})},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){"use strict";var a=n(46),c="http://musicapi.ignorantscholar.cn",r={get:function(e,t){if(t){var n=[];Object.keys(t).forEach(function(e){n.push(e+"="+t[e])}),-1===e.search(/\?/)?e+="?"+n.join("&"):e+="&"+n.join("&")}var a={method:"get",headers:{authorization:window.sessionStorage.getItem("token")?window.sessionStorage.getItem("token"):null,"Content-Type":"application/json; charset=utf-8"},credentials:"include",mode:"cors"};return fetch(c+e,a).then(function(e){return e.json().then(function(t){return e.ok&&200===t.code?Promise.resolve(t):Promise.reject(t)})})},post:function(e,t){return fetch(c+e,{method:"post",headers:{},credentials:"include",mode:"cors",body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return e.ok&&200===t.code?Promise.resolve(t):(console.log(t,"000000000"),Object(a.c)(t.msg||"\u7f51\u7edc\u8bf7\u6c42\u5f02\u5e38",2e3),Promise.reject(t))})})}};function o(e){return r.post("/personalized?limit=".concat(e.limit),{})}function l(e){return r.post("/top/album?limit=".concat(e.limit),{})}function i(e){return r.post("/playlist/detail?id=".concat(e.id),{})}function s(e){return r.post("/song/url?id=".concat(e.id),{})}function u(e){return r.post("/mv/detail?mvid=".concat(e.id),{})}function m(e){return r.post("/comment/mv?id=".concat(e.id))}function d(e){return r.post("/simi/mv?mvid=".concat(e.id))}function p(e){return r.post("/mv/first?limit=10")}function f(e){return r.post("/user/playlist?uid=".concat(e.uid),{})}function E(e){return r.post("/login/cellphone?phone=".concat(e.phone,"&password=").concat(e.password),{})}n.d(t,"d",function(){return E}),n.d(t,"b",function(){return m}),n.d(t,"g",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"j",function(){return f})},60:function(e,t,n){"use strict";t.a=function(){var e=window.location.href;if(-1===e.indexOf("?"))return null;for(var t=e.split("?")[1].split("&"),n={},a=0;a<t.length;a++){var c=t[a].split("=");n[c[0]]=decodeURIComponent(c[1])}return n}}}]);